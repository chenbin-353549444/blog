---
title: Java SE笔记： 异常机制
date: 2016-08-21 21:10:00
updated: 2016-08-21 21:10:00
description: "异常机制"
categories: [个人笔记]
tags: [Java, Java SE笔记]
---

### 异常机制的UML结构图：
![](/images/javase_32.jpg)

### 异常的分类
> - 编译时异常：发生的几率较高，程序员能预见会发生的，举例：拿着透明袋子的100万，出门会遇到抢劫事件，那么要在出门前就处理
> - 运行时异常：发生的几率较低，程序员不能预见，如果全部处理，程序会更加安全，但是程序员会很累，举例：出门被飞机轮子砸到

### 处理异常
#### 声明抛出  throws
- 使用throws处理异常不是真正处理异常而是推卸责任。
- 谁调用的就会抛给谁。
- `如果出现了异常，因为采用的是上抛，给了JVM，JVM遇到这个异常就会退出JVM，下面的代码不会执行.`

#### 捕捉  try...catch..
语法：
```java
try{
    可能出现异常的代码;
}catch(异常类型1 变量){
    处理异常的代码;
}catch(异常类型2 变量){
    处理异常的代码;
}....
```
- `catch语句块可以写多个.`
- `但是从上到下catch,必须从小类型异常到大类型异常进行捕捉。`
- `try...catch...中最多执行1个catch语句块。执行结束之后try...catch...就结束了。`

使用try catch是真正处理异常，使用throws是推卸责任，举例：公司员工造成100万的损失，自身无法处理，所以把问题推卸给部门领导，
如果上一级有能力处理，则该问题被处理了，如果逐层推卸到董事长仍无法解决问题，则公司就倒闭了！

重点掌握getMessage()，和printStackTrace()

> **try catch 的底层实现原理：**
> `程序运行到异常时，JVM会创建异常对象，该对象应当包含异常的详细信息（类型和具体原因），并且该对象已经重写了toString方法，然后JVM将该对象的内存地址赋值给catch语句块中的e变量。`

### 异常是什么？
- 异常模拟的是现实世界中“不正常的”事件。
- java中采用“类”去模拟异常。
- 类是可以创建对象的。

NullPointerException e = 0x1234;
e是引用类型，e中保存的内存地址指向堆中的“对象”
这个对象一定是NullPointerException类型。
这个对象就表示真实存在的异常事件。
NullPointerException是一类异常。

“抢劫”就是一类异常。----->类
“张三被抢劫”就是一个异常事件 ---->对象

### 异常机制的作用？
> java语言为我们提供一种完善的异常处理机制，作用是：程序发生异常事件之后，为我们输出详细的信息，程序员通过这个信息，可以对程序进行一些处理，使程序更加健壮。

以上程序编译通过了，但是运行时出现了异常，表示发生某个异常事件。
JVM向控制台输出如下的信息：
`本质：程序执行过程中发生了算数异常这个事件，JVM为我们创建了一个ArithmeticException类型的对象。并且这个对象中包含了详细的异常信息，并且JVM将这个对象中的信息输出到控制台。`
Exception in thread "main" java.lang.ArithmeticException: / by zero
        at ExceptionTest01.main(ExceptionTest01.java:25)